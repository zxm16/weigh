import {
  __commonJS,
  require_buildFullPath,
  require_buildURL,
  require_settle
} from "./chunk-KXCLXDWX.js";

// ../../../新建文件夹 (2)/软件开发/体重本/node_modules/axios-adapter-uniapp/helper/isMultiUpload.js
var require_isMultiUpload = __commonJS({
  "../../../\u65B0\u5EFA\u6587\u4EF6\u5939 (2)/\u8F6F\u4EF6\u5F00\u53D1/\u4F53\u91CD\u672C/node_modules/axios-adapter-uniapp/helper/isMultiUpload.js"(exports, module) {
    module.exports = function isMultiUpload(config) {
      return Array.isArray(config.files) && config.files.length > 0;
    };
  }
});

// ../../../新建文件夹 (2)/软件开发/体重本/node_modules/axios-adapter-uniapp/helper/isUploadFile.js
var require_isUploadFile = __commonJS({
  "../../../\u65B0\u5EFA\u6587\u4EF6\u5939 (2)/\u8F6F\u4EF6\u5F00\u53D1/\u4F53\u91CD\u672C/node_modules/axios-adapter-uniapp/helper/isUploadFile.js"(exports, module) {
    var isMultiUpload = require_isMultiUpload();
    module.exports = function isUploadFile(config) {
      if (config.method === "post") {
        if (config.filePath && config.name)
          return true;
        if (isMultiUpload(config))
          return true;
      }
      return false;
    };
  }
});

// ../../../新建文件夹 (2)/软件开发/体重本/node_modules/axios-adapter-uniapp/helper/format.js
var require_format = __commonJS({
  "../../../\u65B0\u5EFA\u6587\u4EF6\u5939 (2)/\u8F6F\u4EF6\u5F00\u53D1/\u4F53\u91CD\u672C/node_modules/axios-adapter-uniapp/helper/format.js"(exports, module) {
    var settle = require_settle();
    var buildURL = require_buildURL();
    var buildFullPath = require_buildFullPath();
    var isUploadFile = require_isUploadFile();
    module.exports = function format(config, resolve, reject) {
      const fullPath = buildFullPath(config.baseURL, config.url);
      const requestHeaders = config.headers;
      const uniConfig = {
        ...config,
        url: buildURL(fullPath, config.params, config.paramsSerializer),
        header: requestHeaders
      };
      if (isUploadFile(config)) {
        delete requestHeaders["Content-Type"];
        if (config.formData) {
          uniConfig.formData = config.formData;
        } else {
          if (typeof config.data === "string") {
            uniConfig.formData = JSON.parse(config.data);
          } else {
            uniConfig.formData = config.data;
          }
        }
      } else if (config.method === "get") {
        uniConfig.data = config.data ? config.data : config.params;
      } else {
        uniConfig.data = config.data;
      }
      if (config.auth) {
        var username = config.auth.username || "";
        var password = unescape(encodeURIComponent(config.auth.password)) || "";
        requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
      }
      uniConfig.complete = function(response) {
        var result = {
          data: response.data,
          status: response.statusCode,
          statusText: response.errMsg,
          header: response.header,
          config
        };
        settle(resolve, reject, result);
      };
      return uniConfig;
    };
  }
});

// ../../../新建文件夹 (2)/软件开发/体重本/node_modules/axios-adapter-uniapp/index.js
var require_axios_adapter_uniapp = __commonJS({
  "../../../\u65B0\u5EFA\u6587\u4EF6\u5939 (2)/\u8F6F\u4EF6\u5F00\u53D1/\u4F53\u91CD\u672C/node_modules/axios-adapter-uniapp/index.js"(exports, module) {
    var isUploadFile = require_isUploadFile();
    var format = require_format();
    function uniappAdapter(config = {}) {
      return new Promise(function dispatchUniApp(resolve, reject) {
        const uniConfig = format(config, resolve, reject);
        let requestTask = null;
        if (config.cancelToken) {
          config.cancelToken.promise.then(function onCanceled(cancel) {
            if (!requestTask) {
              return;
            }
            requestTask.abort();
            reject(cancel);
            requestTask = null;
          });
        }
        if (isUploadFile(config)) {
          requestTask = uni.uploadFile(uniConfig);
        } else {
          requestTask = uni.request(uniConfig);
        }
      });
    }
    module.exports = uniappAdapter;
    module.exports.default = uniappAdapter;
  }
});
export default require_axios_adapter_uniapp();
//# sourceMappingURL=axios-adapter-uniapp.js.map

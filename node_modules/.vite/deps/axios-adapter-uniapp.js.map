{
  "version": 3,
  "sources": ["../../axios-adapter-uniapp/helper/isMultiUpload.js", "../../axios-adapter-uniapp/helper/isUploadFile.js", "../../axios-adapter-uniapp/helper/format.js", "../../axios-adapter-uniapp/index.js"],
  "sourcesContent": ["module.exports = function isMultiUpload(config) {\r\n  return Array.isArray(config.files) && config.files.length > 0\r\n}\r\n", "const isMultiUpload = require('./isMultiUpload')\r\n\r\nmodule.exports = function isUploadFile(config) {\r\n  if (config.method === 'post') {\r\n    if (config.filePath && config.name) return true\r\n\r\n    if (isMultiUpload(config)) return true\r\n  }\r\n\r\n  return false\r\n}\r\n", "// var utils = require(\"axios/lib/utils\");\r\nvar settle = require('axios/lib/core/settle')\r\n// var cookies = require(\"axios/lib/helpers/cookies\");\r\nvar buildURL = require('axios/lib/helpers/buildURL')\r\nvar buildFullPath = require('axios/lib/core/buildFullPath')\r\n// var parseHeaders = require(\"axios/lib/helpers/parseHeaders\");\r\n// var isURLSameOrigin = require(\"axios/lib/helpers/isURLSameOrigin\");\r\n// var createError = require(\"axios/lib/core/createError\");\r\nconst isUploadFile = require('./isUploadFile')\r\n\r\nmodule.exports = function format(config, resolve, reject) {\r\n  const fullPath = buildFullPath(config.baseURL, config.url)\r\n  const requestHeaders = config.headers\r\n\r\n  const uniConfig = {\r\n    ...config,\r\n    url: buildURL(fullPath, config.params, config.paramsSerializer),\r\n\r\n    // uniapp \u7528\u7684\u662F header\r\n    header: requestHeaders,\r\n  }\r\n\r\n  if (isUploadFile(config)) {\r\n    delete requestHeaders['Content-Type'] // Let the browser set it\r\n    if (config.formData) {\r\n      uniConfig.formData = config.formData\r\n    } else {\r\n      // application/json \u4E14 data isObject \u65F6\uFF0C \u53D1\u9001\u524D\u4F1A\u5BF9 config.data \u8FDB\u884C JSON.stringify \u5904\u7406\r\n      // uniapp \u5185\u90E8\u4F1A\u5904\u7406\uFF0C\u5373\u9700\u8981\u7684\u5C31\u662F object\uFF0C \u6240\u4EE5\u9700\u8981\u63D0\u524D parse\r\n      if (typeof config.data === 'string') {\r\n        // \u5982\u679C\uFF0Cconfig.data \u6570\u636E\u683C\u5F0F\u4E0D\u5408\u9002\uFF0C\u8FD8\u662F\u9009\u62E9\u62A5\u9519\r\n        uniConfig.formData = JSON.parse(config.data)\r\n      } else {\r\n        uniConfig.formData = config.data\r\n      }\r\n    }\r\n  } else if (config.method === 'get') {\r\n    // \u517C\u5BB9 get \u65F6\u7684 params \u5B57\u6BB5\r\n    uniConfig.data = config.data ? config.data : config.params\r\n  } else {\r\n    uniConfig.data = config.data\r\n  }\r\n\r\n  // HTTP basic authentication\r\n  if (config.auth) {\r\n    var username = config.auth.username || ''\r\n    var password = unescape(encodeURIComponent(config.auth.password)) || ''\r\n    requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password)\r\n  }\r\n\r\n  uniConfig.complete = function (response) {\r\n    // \u6682\u65F6\u4E0D\u660E\u767D\u4E3A\u4EC0\u4E48\u8981\u5224\u65AD responseType === 'text'\uFF0C\u4E5F\u8BB8\u8FD4\u56DE\u7ED3\u679C\u662F\u6709\u591A\u79CD\u683C\u5F0F\u7684\uFF0C\u4F46\u662F\u76EE\u524D\u6CA1\u78B0\u5230\u3002\r\n    // var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\r\n    var result = {\r\n      data: response.data,\r\n      status: response.statusCode,\r\n      statusText: response.errMsg,\r\n      header: response.header,\r\n      config: config,\r\n      // request: request\r\n    }\r\n\r\n    settle(resolve, reject, result)\r\n  }\r\n\r\n  return uniConfig\r\n}\r\n", "/* global uni */\r\n'use strict'\r\n\r\nconst isUploadFile = require('./helper/isUploadFile')\r\nconst format = require('./helper/format')\r\n\r\n/**\r\n * \u53C2\u6570\u914D\u7F6E\u53C2\u8003\uFF1A\r\n *   > axios          https://www.npmjs.com/package/axios#request-config\r\n *   > uniapp request https://uniapp.dcloud.io/api/request/request\r\n *   > uniapp upload  https://uniapp.dcloud.io/api/request/network-file\r\n * @param {object} config\r\n */\r\nfunction uniappAdapter(config = {}) {\r\n  return new Promise(function dispatchUniApp(resolve, reject) {\r\n    const uniConfig = format(config, resolve, reject)\r\n\r\n    let requestTask = null\r\n    if (config.cancelToken) {\r\n      // Handle cancellation\r\n      config.cancelToken.promise.then(function onCanceled(cancel) {\r\n        if (!requestTask) {\r\n          return\r\n        }\r\n\r\n        requestTask.abort()\r\n        reject(cancel)\r\n        // Clean up request\r\n        requestTask = null\r\n      })\r\n    }\r\n\r\n    // Send the request\r\n    if (isUploadFile(config)) {\r\n      requestTask = uni.uploadFile(uniConfig)\r\n    } else {\r\n      requestTask = uni.request(uniConfig)\r\n    }\r\n  })\r\n}\r\nmodule.exports = uniappAdapter\r\n\r\n// Allow use of default import syntax in TypeScript\r\nmodule.exports.default = uniappAdapter\r\n"],
  "mappings": ";;;;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,SAAS,cAAc,QAAQ;AAC9C,aAAO,MAAM,QAAQ,OAAO,KAAK,KAAK,OAAO,MAAM,SAAS;AAAA,IAC9D;AAAA;AAAA;;;ACFA;AAAA;AAAA,QAAM,gBAAgB;AAEtB,WAAO,UAAU,SAAS,aAAa,QAAQ;AAC7C,UAAI,OAAO,WAAW,QAAQ;AAC5B,YAAI,OAAO,YAAY,OAAO;AAAM,iBAAO;AAE3C,YAAI,cAAc,MAAM;AAAG,iBAAO;AAAA,MACpC;AAEA,aAAO;AAAA,IACT;AAAA;AAAA;;;ACVA;AAAA;AACA,QAAI,SAAS;AAEb,QAAI,WAAW;AACf,QAAI,gBAAgB;AAIpB,QAAM,eAAe;AAErB,WAAO,UAAU,SAAS,OAAO,QAAQ,SAAS,QAAQ;AACxD,YAAM,WAAW,cAAc,OAAO,SAAS,OAAO,GAAG;AACzD,YAAM,iBAAiB,OAAO;AAE9B,YAAM,YAAY;AAAA,QAChB,GAAG;AAAA,QACH,KAAK,SAAS,UAAU,OAAO,QAAQ,OAAO,gBAAgB;AAAA,QAG9D,QAAQ;AAAA,MACV;AAEA,UAAI,aAAa,MAAM,GAAG;AACxB,eAAO,eAAe;AACtB,YAAI,OAAO,UAAU;AACnB,oBAAU,WAAW,OAAO;AAAA,QAC9B,OAAO;AAGL,cAAI,OAAO,OAAO,SAAS,UAAU;AAEnC,sBAAU,WAAW,KAAK,MAAM,OAAO,IAAI;AAAA,UAC7C,OAAO;AACL,sBAAU,WAAW,OAAO;AAAA,UAC9B;AAAA,QACF;AAAA,MACF,WAAW,OAAO,WAAW,OAAO;AAElC,kBAAU,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO;AAAA,MACtD,OAAO;AACL,kBAAU,OAAO,OAAO;AAAA,MAC1B;AAGA,UAAI,OAAO,MAAM;AACf,YAAI,WAAW,OAAO,KAAK,YAAY;AACvC,YAAI,WAAW,SAAS,mBAAmB,OAAO,KAAK,QAAQ,CAAC,KAAK;AACrE,uBAAe,gBAAgB,WAAW,KAAK,WAAW,MAAM,QAAQ;AAAA,MAC1E;AAEA,gBAAU,WAAW,SAAU,UAAU;AAGvC,YAAI,SAAS;AAAA,UACX,MAAM,SAAS;AAAA,UACf,QAAQ,SAAS;AAAA,UACjB,YAAY,SAAS;AAAA,UACrB,QAAQ,SAAS;AAAA,UACjB;AAAA,QAEF;AAEA,eAAO,SAAS,QAAQ,MAAM;AAAA,MAChC;AAEA,aAAO;AAAA,IACT;AAAA;AAAA;;;AClEA;AAAA;AAGA,QAAM,eAAe;AACrB,QAAM,SAAS;AASf,aAAS,cAAc,SAAS,CAAC,GAAG;AAClC,aAAO,IAAI,QAAQ,SAAS,eAAe,SAAS,QAAQ;AAC1D,cAAM,YAAY,OAAO,QAAQ,SAAS,MAAM;AAEhD,YAAI,cAAc;AAClB,YAAI,OAAO,aAAa;AAEtB,iBAAO,YAAY,QAAQ,KAAK,SAAS,WAAW,QAAQ;AAC1D,gBAAI,CAAC,aAAa;AAChB;AAAA,YACF;AAEA,wBAAY,MAAM;AAClB,mBAAO,MAAM;AAEb,0BAAc;AAAA,UAChB,CAAC;AAAA,QACH;AAGA,YAAI,aAAa,MAAM,GAAG;AACxB,wBAAc,IAAI,WAAW,SAAS;AAAA,QACxC,OAAO;AACL,wBAAc,IAAI,QAAQ,SAAS;AAAA,QACrC;AAAA,MACF,CAAC;AAAA,IACH;AACA,WAAO,UAAU;AAGjB,WAAO,QAAQ,UAAU;AAAA;AAAA;",
  "names": []
}
